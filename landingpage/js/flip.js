
!function(t){var e=function(e,i){e.data("flipped",!0),e.addClass("complete");var s="rotate"+e.data("axis");e.find(e.data("front")).css({transform:s+(e.data("reverse")?"(-180deg)":"(180deg)"),"z-index":"0"}),e.find(".upper").css("z-index","0"),e.find(".bottom").css("z-index","1"),e.find(e.data("back")).css({transform:s+"(0deg)","z-index":"1"}),e.one(a(),function(){t(this).trigger("flip:done"),void 0!==i&&i.call(this)})},i=function(e,i){e.data("flipped",!1),e.removeClass("complete");var s="rotate"+e.data("axis");e.find(e.data("front")).css({transform:s+"(0deg)","z-index":"1"}),e.find(e.data("back")).css({transform:s+(e.data("reverse")?"(180deg)":"(-180deg)"),"z-index":"0"}),e.one(a(),function(){t(this).trigger("flip:done"),void 0!==i&&i.call(this)})},a=function(){var t,e=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==e.style[t])return i[t]};t.fn.flip=function(a,n){return"function"==typeof a&&(n=a),this.each(function(){var r=t(this);if(void 0===a||"boolean"!=typeof a&&"string"!=typeof a)if(r.data("initiated"))!a||void 0===a.axis&&void 0===a.reverse||s.call(this,a,function(){r.trigger("flip:change"),void 0!==n&&n.call(this)});else{r.data("initiated",!0);var o=t.extend({axis:"y",reverse:!1,trigger:"click",speed:500,forceHeight:!1,forceWidth:!1,autoSize:!0,front:"auto",back:"auto"},a);"auto"==o.front?o.front=r.find(".front").length>0?".front":"div:first-child":"autostrict"==o.front&&(o.front="div:first-child"),"auto"==o.back?o.back=r.find(".back").length>0?".back":"div:first-child + div":"autostrict"==o.back&&(o.back="div:first-child + div"),r.data("reverse",o.reverse),r.data("axis",o.axis),r.data("front",o.front),r.data("back",o.back);var d="rotate"+("x"==o.axis.toLowerCase()?"x":"y"),f=2*r["outer"+("rotatex"==d?"Height":"Width")]();r.find(r.data("back")).css({transform:d+"("+(o.reverse?"180deg":"-180deg")+")"}),r.css({perspective:f,position:"relative"});var c=o.speed/1e3||.5,l=r.find(o.front).add(o.back,r);if(o.forceHeight?l.outerHeight(r.height()):o.autoSize&&l.css({height:"100%"}),o.forceWidth?l.outerWidth(r.width()):o.autoSize&&l.css({width:"100%"}),l.css({"backface-visibility":"hidden","transform-style":"preserve-3d",position:"absolute","z-index":"1"}),l.find("*").css({"backface-visibility":"hidden"}),r.find(r.data("back")).css({transform:d+"("+(o.reverse?"180deg":"-180deg")+")","z-index":"0"}),(window.chrome||window.Intl&&Intl.v8BreakIterator)&&"CSS"in window&&r.css({"-webkit-transform-style":"preserve-3d"}),setTimeout(function(){l.css({transition:"all "+c+"s ease-out"}),void 0!==n&&n.call(this)},20),"click"==o.trigger.toLowerCase())r.on(t.fn.tap?"tap":"click",function(a){a||(a=window.event),r.find(t(a.target).closest('button, a, input[type="submit"]')).length||(r.data("flipped")?i(r):e(r))});else if("hover"==o.trigger.toLowerCase()){var v=function(){i(r)};r.mouseenter(function(){r.unbind("mouseleave",v),e(r),setTimeout(function(){r.bind("mouseleave",v),r.is(":hover")||i(r)},o.speed+150)}),r.mouseleave(v)}}else"toggle"==a&&(a=!r.data("flipped")),a?e(r,n):i(r,n)}),this};var s=function(e,i){var a=!1;if(void 0!==e.axis&&t(this).data("axis")!=e.axis.toLowerCase()&&(t(this).data("axis",e.axis.toLowerCase()),a=!0),void 0!==e.reverse&&t(this).data("reverse")!=e.reverse&&(t(this).data("reverse",e.reverse),a=!0),a){var s=t(this).find(t(this).data("front")).add(t(this).data("back"),t(this)),n=s.css("transition");s.css({transition:"none"});var r="rotate"+t(this).data("axis");t(this).data("flipped")?t(this).find(t(this).data("front")).css({transform:r+(t(this).data("reverse")?"(-180deg)":"(180deg)"),"z-index":"0"}):t(this).find(t(this).data("back")).css({transform:r+"("+(t(this).data("reverse")?"180deg":"-180deg")+")","z-index":"0"}),setTimeout(function(){s.css({transition:n}),i.call(this)}.bind(this),0)}else setTimeout(i.bind(this),0)}}(jQuery);
